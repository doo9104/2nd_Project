<!DOCTYPE html>
<html 	xmlns:th="http://www.thymeleaf.org"
         xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
         xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
         layout:decorator="layout/default">

<div layout:fragment="content">

    <section id="portfolio" class="portfolio">
        <div class="container" style="margin-top: 30px;">
            <form>
                <small>글 번호</small>
                <input class="form-control" type="text" id="id" name="id" th:value="${post.id}" readonly/>
                <small>제목</small>
                <input class="form-control" type="text" id="title" name="title" th:value="${post.title}" readonly/>
                <small>내용</small>
                <textarea class="form-control" id="content" name="content" readonly th:text="${post.content}"></textarea>
                <small>작성자</small>
                <input class="form-control" type="text" id="writer" name="writer" th:value="${post.writer}" readonly/>
            </form>

            <div sec:authorize="isAuthenticated()" th:if="${#authentication.getName() == post.writer}">
                <a class="btn btn-primary" type="button"  th:href="@{'/dog/modify/' + ${post.id}}" >수정</a>
                <button class="btn btn-primary" type="button" id="btn-delete">삭제</button>
                <a class="btn btn-primary" type="button"  href="/dog" >목록</a>
            </div>
            <div th:unless="${#authentication.getName() == post.writer}">
                <a class="btn btn-primary" type="button"  href="/dog" >목록</a>
            </div>

        </div>


        <!---->
        <div class="container" style="margin-top: 20px;margin-bottom: 0px;padding-bottom: 10px;padding-top: 5px;border-top-left-radius:20px;border-top-right-radius:20px;border: 1px solid #1b212d;">
            <div>
                <div style="margin-bottom: 5px;margin-top: 5px;margin-left: 5px;margin-right: 5px;"><small>Your Comment</small></div>
                <div ><textarea class="border rounded" style="width: 100%;margin-left: 5px;margin-right: 5px;" maxlength="500" rows="4" placeholder="Comment" required></textarea>
                </div>

                <div class="d-xs-flex d-sm-flex d-md-flex d-lg-flex d-xl-flex justify-content-sm-end justify-content-md-end justify-content-lg-end justify-content-xl-end">
                <!--<button class="btn btn-primary" type="button" style="margin-left: 5px;margin-right: 5px;">Button</button>-->
                <button class="learn-more">등록</button>
                </div>


            </div>
        </div>
        <div class="container" id="comments" style="background-color: #1b212d;padding-top: 15px;padding-bottom: 15px;padding-right: 25px;padding-left: 55px;width: 1140px;margin-top: 0;border-bottom-right-radius:20px;border-bottom-left-radius:20px;">

            <!--<div class="comment" style="margin-top: 20px;margin-right: 30px;margin-bottom: 20px;margin-left: 30px;padding: 10px;"><img class="rounded float-left commentPic" src="https://github.com/OlgaKoplik/CodePen/blob/master/anonym.png?raw=true" style="max-width: 45px;max-height: 45px;margin-right: 15px;">
                <div>
                    <div class="d-flex align-items-center align-items-sm-center align-items-md-center align-items-lg-center align-items-xl-center">
                        <h3 class="d-block d-sm-block d-md-block d-lg-block d-xl-block commentAuthor" style="color: #ffffff;font-size: 1.17em;margin-bottom: 0;">admin 관리자</h3>
                        <span class="publishDate" style="color: #787878;margin-left: 15px;font-size: 11px;">Right now<br></span>
                    </div>
                    <span class="commentContent" style="color: #ffffff;margin-top: 5px;margin-bottom: 5px;">텍스트입니다 텍스트입니다</span>
                </div>
            </div>
            <hr>-->


        <!---->



    </section>

    <div class="d-lg-none scroll-to-top position-fixed rounded"><a
            class="d-block js-scroll-trigger text-center text-white rounded" href="#page-top"><i
            class="fa fa-chevron-up"></i></a></div>
</div>
<th:block layout:fragment="script">
<script th:inline="javascript" th:src="@{'/js/app/comments.js'}"></script>

    <script th:inline="javascript">
        // 댓글 리스트 가져오기
        (function getAllReplies(){
            //load replies
            commentsmanager.getAll([[${post.id}]], printList);
        })();

        // 댓글 리스트 화면 출력처리
        function printList(list){
            var str = "";
            var commentObj;
            for(var i = 0; i < list.length; i++){
                commentObj = list[i];

                str += "<div class=\"comment\" style=\"margin-top: 20px;margin-right: 30px;margin-bottom: 20px;margin-left: 30px;padding: 10px;\">" +
                    "<img class=\"rounded float-left commentPic\" src=\"https://github.com/OlgaKoplik/CodePen/blob/master/anonym.png?raw=true\" style=\"max-width: 45px;max-height: 45px;margin-right: 15px;\">" +
                    "<div>" +
                    "<div class=\"d-flex align-items-center align-items-sm-center align-items-md-center align-items-lg-center align-items-xl-center\">" +
                    "<h3 class=\"d-block d-sm-block d-md-block d-lg-block d-xl-block commentAuthor\" style=\"color: #ffffff;font-size: 1.17em;margin-bottom: 0;\">"+commentObj.writer+"</h3>"+
                    "<span class=\"publishDate\" style=\"color: #787878;margin-left: 15px;font-size: 11px;\">"+formatDate(commentObj.modifiedDate)+"<br></span>"+
                    "</div>"+
                    "<span class=\"commentContent\" style=\"color: #ffffff;margin-top: 5px;margin-bottom: 5px;\">"+commentObj.content+"</span>"+
                    "</div></div><hr>";
            }
            $("#comments").html(str);
        }

        // 날짜 형식 YYYY-MM-DD
        function formatDate(timeValue){
            var date = new Date(timeValue);
            return  date.getFullYear()
                + "-" + (date.getMonth()+1 >= 10?date.getMonth()+1 : '0'+ (date.getMonth()+1)  )
                + "-" + (date.getDate() >= 10?date.getDate() : '0'+ (date.getDate()) )
                + " / " + date.getHours() + ":" + date.getMinutes()
            // 2020-
        }

    </script>

</th:block>





</html>

